- page_title t('.page_title', label: @fluentd.label)

%p
  = link_to t("fluentd.common.log"), log_fluentd_agent_path(@fluentd)
  = link_to t("fluentd.common.config_file"), fluentd_setting_path(@fluentd)

%div.row
  %div.col-lg-3
    %div{class: "panel panel-#{@fluentd.agent.running? ? "success":"default"}"}
      %div.panel-heading
        %h4
          - if @fluentd.agent.running?
            = icon("fa-play")
            = t("fluentd.common.running")
          - else
            = icon("fa-pause")
            = t("fluentd.common.stopped")
      %div.panel-body
        - if flash[:error]
          %div.alert.alert-danger= flash[:error]
        = link_to icon("fa-play") << t("fluentd.common.start"), start_fluentd_agent_path(@fluentd),     method: :put, class: "btn #{@fluentd.agent.running? ? "disabled btn-default" : "btn-primary"}"
        = link_to icon("fa-pause") << t("fluentd.common.stop"), stop_fluentd_agent_path(@fluentd),       method: :put, class: "btn #{@fluentd.agent.running? ? "btn-danger" : "disabled btn-default"}"
        = link_to icon("fa-refresh") << t("fluentd.common.restart"), restart_fluentd_agent_path(@fluentd), method: :put, class: "btn #{@fluentd.agent.running? ? "btn-warning" : "disabled btn-default"}"

- if @errors.present?

  %h2= t('.recent_errors', count: @error_count)

  %div.row
    %div.col-lg-12
      - @errors.each do |errors|
        %div.panel.panel-default
          %div.panel-heading
            %h4= errors.shift
          - if errors.present?
            %div.panel-body
              %ul
                - errors.each do |stack|
                  %li= stack
