= render "shared/setting_errors"

- # NOTE: plugin_setting_form_action_url is defined at SettingConcern
= form_with(model: @setting, url: plugin_setting_form_action_url(@fluentd), class: "ignore-rails-error-div", builder: FluentdFormBuilder) do |form|
  - @setting.common_options.each do |key|
    = form.field(key)

  - if @setting.have_buffer_section?
    = render "shared/settings/buffer_form", form: form, buffer: @buffer

  - if @setting.have_storage_section?
    = render "shared/settings/storage_form", form: form, storage: @storage

  - if @setting.have_parse_section?
    = render "shared/settings/parser_form", form: form, parser: @parser

  - if @setting.have_format_section?
    = render "shared/settings/formatter_form", form: form, formatter: @formatter

  - if @setting.advanced_options.present?
    .card.bg-light
      .card-body
        %h4{"data-toggle" => "collapse", "href" => "#advanced-setting"}
          = icon('fa-caret-down')
          = t('terms.advanced_setting')
        #advanced-setting.collapse
          - @setting.advanced_options.each do |key|
            = form.field(key)

  = form.submit t('fluentd.common.finish'), class: "btn btn-lg btn-primary float-right mt-3"
